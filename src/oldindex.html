<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="estilos.css">
    <title>DevexTeam Logo Animado</title>
</head>

<body>
    <div id="drawing"></div>
    <script src="http://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/svg.js/2.6.4/svg.min.js"></script>
    <script>
        var templateReset = `
            <defs>
       <linearGradient id="id0" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="0" y2="0">
        <stop offset="0" stop-opacity="1" stop-color="#FFCB4A"/>
        <stop offset="1" stop-opacity="1" stop-color="#E4A200"/>
       </linearGradient>
       <linearGradient id="id1" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="0" y2="0">
        <stop offset="0" stop-opacity="1" stop-color="#FFCB4A"/>
        <stop offset="1" stop-opacity="1" stop-color="#E4A200"/>
       </linearGradient>
       <linearGradient id="id2" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="0" y2="0">
        <stop offset="0" stop-opacity="1" stop-color="#FFCB4A"/>
        <stop offset="1" stop-opacity="1" stop-color="#E4A200"/>
       </linearGradient>
     </defs>
      <rect id="fondo" fill="#367F9B" x="8" width="390" height="390" opacity="0"/>
     <g id="sombra">
      <polygon fill="#006084" points="0,0"/>
      <polygon fill="#006084"  points="0,0"/>
     </g>
     <g id="inner-trinagle">
        <polygon fill="#FEFEFE" fill-opacity="0" points="134,275 272,195 272,195 134,116 "/>
        <polygon fill="url(#id0)" stroke="#FEFEFE" stroke-width="3.1252" stroke-linejoin="round" points="0,0"/>
        <polygon fill="url(#id1)" stroke="#FEFEFE" stroke-width="3.1252" stroke-linejoin="round" points="0,0"/>
        <polygon fill="url(#id2)" stroke="#FEFEFE" stroke-width="3.1252" stroke-linejoin="round" points="0,0"/>
      </g>
     <g id="triangle">
      <line data-points="134,275,55,320" data-time="100" class="stroke-triangle" fill="none" stroke="#FEFEFE" stroke-width="3.1252" stroke-linejoin="round" x1="0" y1="0" x2="0" y2= "0" />
      <line data-points="272,195,351,149" class="stroke-triangle" fill="none" stroke="#FEFEFE" stroke-width="3.1252" x1="0" y1="0" x2="0" y2= "0" />
      <line data-points="134,116,134,24" class="stroke-triangle" fill="none" stroke="#FEFEFE" stroke-width="3.1252" stroke-linejoin="round" x1="0" y1="0" x2="0" y2= "0" />
      <line data-points="134,24,134,116" class="stroke-triangle" fill="none" stroke="#FEFEFE" stroke-width="3.12402" x1="0" y1="0" x2="0" y2= "0" />
      <line data-points="55,320,134,275" class="stroke-triangle" fill="none" stroke="#FEFEFE" stroke-width="3.12402" x1="0" y1="0" x2="0" y2= "0" />
      <line data-points="272,195,351,149" class="stroke-triangle" fill="none" stroke="#FEFEFE" stroke-width="3.12402" x1="0" y1="0" x2="0" y2= "0" />
     </g>
     <g id="caption">
      <polygon id="left-bracket" fill="#606062" fill-rule="nonzero" points="0,405 18,405 18,412 8,412 8,470 18,470 18,476 0,476 "/>
      <path id="devex-text" fill="#606062" fill-rule="nonzero" d="M23 467l0 -53 18 0c7,0 13,1 17,3 4,2 8,5 10,9 3,5 4,9 4,14 0,4 -1,7 -2,11 -1,3 -3,6 -6,8 -3,3 -6,5 -9,6 -2,1 -4,1 -6,1 -1,1 -4,1 -9,1l-17 0zm17 -47l-9 0 0 40 9 0c4,0 7,0 9,-1 2,0 4,-1 6,-2 1,-1 2,-1 3,-3 4,-3 6,-8 6,-14 0,-6 -2,-11 -6,-14 -1,-2 -3,-3 -5,-3 -2,-1 -3,-2 -5,-2 -2,0 -4,-1 -8,-1zm70 30l-24 0c0,3 1,6 3,8 2,2 5,3 8,3 5,0 9,-1 13,-4l0 6c-2,2 -4,3 -7,3 -2,1 -4,1 -7,1 -4,0 -7,0 -9,-2 -3,-2 -5,-4 -6,-6 -1,-3 -2,-6 -2,-10 0,-5 1,-10 4,-13 3,-3 7,-5 12,-5 5,0 9,2 11,5 3,3 4,7 4,13l0 1zm-24 -4l18 0c-1,-3 -1,-5 -3,-7 -1,-1 -3,-2 -6,-2 -2,0 -4,1 -6,2 -2,2 -3,4 -3,7zm52 -14l8 0 -16 35 -2 0 -16 -35 8 0 9 21 9 -21zm41 18l-24 0c0,3 1,6 3,8 2,2 5,3 8,3 5,0 9,-1 13,-4l0 6c-2,2 -5,3 -7,3 -2,1 -4,1 -7,1 -4,0 -7,0 -9,-2 -3,-2 -5,-4 -6,-6 -2,-3 -2,-6 -2,-10 0,-5 1,-10 4,-13 3,-3 7,-5 12,-5 5,0 8,2 11,5 3,3 4,7 4,13l0 1zm-24 -4l17 0c0,-3 -1,-5 -2,-7 -1,-1 -3,-2 -6,-2 -2,0 -4,1 -6,2 -2,2 -3,4 -3,7zm56 -14l9 0 -14 17 15 18 -9 0 -11 -13 -10 13 -9 0 15 -18 -15 -17 9 0 10 12 10 -12z"/>
      <path id="team-text" fill="#F7C650" fill-rule="nonzero" d="M222 414l45 0 0 6 -19 0 0 47 -7 0 0 -47 -19 0 0 -6zm69 36l-24 0c0,3 1,6 3,8 2,2 5,3 8,3 5,0 9,-1 13,-4l0 6c-2,2 -5,3 -7,3 -2,1 -4,1 -7,1 -4,0 -7,0 -9,-2 -3,-2 -5,-4 -6,-6 -2,-3 -2,-6 -2,-10 0,-5 1,-10 4,-13 3,-3 7,-5 12,-5 5,0 8,2 11,5 3,3 4,7 4,13l0 1zm-24 -4l17 0c0,-3 -1,-5 -2,-7 -2,-1 -4,-2 -6,-2 -3,0 -5,1 -6,2 -2,2 -3,4 -3,7zm54 0l0 15c0,1 0,1 1,1 1,0 2,0 4,-1l0 4c-2,1 -3,2 -4,2 -1,0 -2,0 -3,0 -3,0 -4,-1 -5,-3 -3,2 -6,3 -9,3 -3,0 -5,0 -7,-2 -1,-2 -2,-4 -2,-6 0,-2 1,-4 2,-6 2,-2 4,-3 7,-4l9 -3 0 -2c0,-4 -2,-7 -6,-7 -4,0 -8,2 -11,6l0 -7c2,-3 6,-5 11,-5 4,0 7,1 9,3 1,1 2,1 2,3 1,1 1,2 2,3 0,1 0,3 0,6zm-7 14l0 -11 -5 2c-2,1 -4,2 -5,3 -1,1 -1,2 -1,4 0,1 0,2 1,3 1,1 2,2 4,2 2,0 4,-1 6,-3zm47 -19l0 26 -7 0 0 -20c0,-4 -1,-6 -2,-8 -1,-1 -3,-2 -5,-2 -2,0 -3,0 -4,1 -1,0 -3,2 -4,3l0 26 -7 0 0 -35 7 0 0 4c3,-3 7,-5 10,-5 5,0 8,2 10,6 4,-4 8,-6 12,-6 4,0 6,1 9,4 2,2 3,6 3,11l0 21 -7 0 0 -21c0,-3 -1,-5 -2,-7 -1,-1 -3,-2 -5,-2 -3,0 -6,1 -8,4z"/>
      <polygon id="right-bracket" fill="#606062" fill-rule="nonzero" points="406,476 388,476 388,470 398,470 398,412 388,412 388,405 406,405 "/>
     </g>
            `
        if (SVG.supported) {
            var draw = SVG('drawing').size('100%', '100%');
            draw.viewbox(0, 0, 406, 476);
            draw.svg(templateReset);
            (function start() {
                console.log('Ya empezo la animacion')
                printBkgr();
            })();

            function printBkgr() {
                var element = SVG.get('fondo');
                console.log(element)
                element.animate({
                    duration: '300',
                    ease: '<',
                    delay: '0.2s'
                }).opacity(1).afterAll(function() {
                    var points, time;
                    // var elements = $('#drawing g#triangle .stroke-triangle').each(function() {
                    //     points = $(this).data("points")
                    //     time = $(this).data("time")
                    //         // console.log(this.instance)
                    //         // drawLine(this, points, time)
                    // })
                    console.log(points)
                    var strokes = SVG.get('triangle')
                    strokes.each(function(i, children) {
                            var points = this.attr('data-points')
                            var time = this.attr('data-time')
                            drawLine(this, points, time)
                            console.log(this.attr('data-points'))
                        })
                        // drawLine()
                        // console.log(elements)
                })
            }

            function drawLine(el, points, time) {
                var points = points.split(',');
                // var ele = $(el);

                console.log(points);
                el.animate(1000).during(function(pos) {
                    var x1 = parseInt(points[0])
                    var x2 = parseInt(points[2])
                    var y1 = parseInt(points[1])
                    var y2 = parseInt(points[3])
                    var xd2 = parseFloat(x1 + (x2 - x1) * pos)
                    var yd2 = parseFloat(y1 + (y2 - y1) * pos)
                    console.log(xd2, yd2, )
                    el.attr({
                        x1: x1,
                        y1: y1,
                        x2: xd2,
                        y2: yd2
                    })
                });
            }
            // var element = SVG.get('devex-text');
            // console.log(element);
        } else {
            alert('SVG not supported'); //imprimir svg en etiqueta

        }
    </script>
</body>

</html>